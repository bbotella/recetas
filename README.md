# ğŸ½ï¸ Recetas de TÃ­a Carmen

> **âš ï¸ DISCLAIMER**: This is a test and experimentation repository. All code has been auto-generated by Claude AI assistant for demonstration and learning purposes. This project showcases AI-powered full-stack development capabilities including Flask applications, Docker containerization, internationalization, and CI/CD pipelines.

A beautiful web application to preserve and share traditional Spanish family recipes. Built with Flask, this application provides an elegant interface to browse, search, and discover 73 authentic recipes from TÃ­a Carmen's collection.

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![Flask](https://img.shields.io/badge/Flask-2.3+-green.svg)](https://flask.palletsprojects.com/)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://docker.com)
[![Docker Hub](https://img.shields.io/badge/Docker%20Hub-bbotella%2Frecetas--tia--carmen-blue.svg)](https://hub.docker.com/r/bbotella/recetas-tia-carmen)
[![Build Status](https://github.com/bbotella/recetas/actions/workflows/docker-build-push.yml/badge.svg)](https://github.com/bbotella/recetas/actions/workflows/docker-build-push.yml)

## ğŸŒŸ Features

- **ğŸ” Smart Search**: Search recipes by name, ingredients, or description
- **ğŸ“‚ Category Filtering**: Browse recipes organized by type (Desserts, Chicken, Fish, etc.)
- **ğŸ“± Responsive Design**: Beautiful interface that works on all devices
- **ğŸ¨ Modern UI**: Clean, intuitive design with Bootstrap styling
- **ğŸ³ Docker Ready**: Easy deployment with Docker and Docker Compose
- **ğŸ—„ï¸ SQLite Database**: Lightweight, fast, and reliable data storage
- **ğŸ”„ Real-time Search**: Instant results as you type
- **ğŸ“„ Individual Recipe Pages**: Detailed view with ingredients and step-by-step instructions
- **ğŸ”„ Automated CI/CD**: Automatic Docker builds and deployments via GitHub Actions
- **ğŸŒ Internationalization**: Multi-language support with Spanish and English

## ğŸ“¸ Screenshots

| Home Page | Recipe Detail | Search Results |
|-----------|---------------|----------------|
| ![Home](docs/screenshots/home.png) | ![Recipe](docs/screenshots/recipe.png) | ![Search](docs/screenshots/search.png) |

## ğŸš€ Quick Start

### Option 1: Docker (Recommended)

```bash
# Clone the repository
git clone https://github.com/bbotella/recetas.git
cd recetas

# Deploy using public Docker Hub image
./quick-deploy.sh

# Access the application
open http://localhost:5014
```

### Option 2: Local Development

```bash
# Clone the repository
git clone https://github.com/bbotella/recetas.git
cd recetas

# Set up virtual environment
python3 -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Import recipes to database
python import_recipes.py

# Run the application
python app.py
```

### Option 3: Quick Setup Script

```bash
# Clone and run setup script
git clone https://github.com/yourusername/tia-carmen-recipes.git
cd tia-carmen-recipes
./setup.sh
```

## ğŸ—ï¸ Project Structure

```
recetas/
â”œâ”€â”€ ğŸ“ recipes/              # 73 original markdown recipe files
â”œâ”€â”€ ğŸ“ templates/            # HTML templates (Jinja2) with i18n support
â”œâ”€â”€ ğŸ“ static/              # CSS, JavaScript, and assets
â”œâ”€â”€ ğŸ“ translations/        # Translation files (Spanish, English)
â”œâ”€â”€ ğŸ“„ app.py               # Main Flask application with i18n
â”œâ”€â”€ ğŸ“„ app_simple.py        # Fallback app (simple translations)
â”œâ”€â”€ ğŸ“„ database.py          # Database operations
â”œâ”€â”€ ğŸ“„ import_recipes.py    # Script to import recipes to database
â”œâ”€â”€ ğŸ“„ babel.cfg            # Babel configuration for i18n
â”œâ”€â”€ ğŸ“„ compile_translations.py # Translation compiler
â”œâ”€â”€ ğŸ“„ setup_i18n.sh        # Internationalization setup script
â”œâ”€â”€ ğŸ“„ requirements.txt     # Python dependencies
â”œâ”€â”€ ğŸ“„ Dockerfile          # Docker configuration
â”œâ”€â”€ ğŸ“„ docker-compose.yml  # Docker Compose setup
â”œâ”€â”€ ğŸ“„ setup.sh            # Quick setup script
â”œâ”€â”€ ğŸ“„ deploy.sh           # Deployment guide
â”œâ”€â”€ ğŸ“„ I18N_README.md      # Internationalization documentation
â””â”€â”€ ğŸ“„ README.md           # This file
```

## ğŸ³ Recipe Categories

The application automatically categorizes recipes into:

- **ğŸ° Postres** (42 recipes) - Desserts, cakes, ice creams, and sweets
- **ğŸ— Pollo** (4 recipes) - Chicken dishes and poultry
- **ğŸŸ Pescado** (8 recipes) - Fish and seafood specialties
- **ğŸ¥© Carnes** (7 recipes) - Meat dishes and stews
- **ğŸ¥¤ Bebidas** (8 recipes) - Beverages and drinks
- **ğŸ¥¬ Verduras** (3 recipes) - Vegetable dishes and salads
- **ğŸ¤ Aperitivos** (1 recipe) - Appetizers and small plates
- **ğŸ½ï¸ Otros** (3 recipes) - Other traditional dishes

## ğŸ”§ Development

### Prerequisites

- Python 3.8 or higher
- pip (Python package manager)
- Optional: Docker and Docker Compose

### Local Development Setup

1. **Clone the repository**
   ```bash
   git clone https://github.com/bbotella/recetas.git
   cd recetas
   ```

2. **Create virtual environment**
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```

3. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

4. **Initialize database**
   ```bash
   python import_recipes.py
   ```

5. **Run development server**
   ```bash
   python app.py
   ```

### Database Schema

```sql
CREATE TABLE recipes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    description TEXT,
    ingredients TEXT,
    instructions TEXT,
    category TEXT,
    filename TEXT UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## ğŸ³ Docker Deployment

### Using Public Docker Hub Image (Recommended)

```bash
# Quick deployment
./quick-deploy.sh

# Or manual deployment
docker-compose pull
docker-compose up -d
```

### Production Deployment with Nginx

```bash
docker-compose --profile production up -d
```

### Development (builds from source)

```bash
# Development deployment
./dev-deploy.sh

# Or manual development
docker-compose -f docker-compose.dev.yml up -d --build
```

### Docker Hub Repository

The application is available as a public Docker image:
- **Registry**: Docker Hub (public)
- **Repository**: `docker.io/bbotella/recetas-tia-carmen`
- **URL**: https://hub.docker.com/r/bbotella/recetas-tia-carmen
- **Port**: 5014 (both host and container)
- **Architectures**: linux/amd64, linux/arm64 (multi-architecture support)
- **Auto-updates**: Automatically built and pushed via GitHub Actions on every commit

### Architecture Compatibility

The Docker image supports multiple architectures:
- **AMD64/x86_64**: Intel/AMD processors (most servers, NAS devices)
- **ARM64**: Apple Silicon, ARM-based servers

If you encounter `exec format error` when deploying to NAS devices, rebuild the image for the specific architecture:

```bash
# For AMD64/x86_64 (most NAS devices)
./push-to-dockerhub-amd64.sh

# For multi-architecture (recommended)
./push-to-dockerhub.sh
```

### Continuous Integration/Deployment

The repository includes automated CI/CD via GitHub Actions:

- **Automatic builds**: Every push to `main` triggers a Docker build
- **Multi-architecture**: Builds for both AMD64 and ARM64 automatically
- **Docker Hub integration**: Images are automatically pushed to Docker Hub
- **Build status**: Check the build badge above for current status
- **Setup guide**: See [GITHUB_ACTIONS_SETUP.md](GITHUB_ACTIONS_SETUP.md) for configuration

**Build triggers**:
- Push to `main` branch â†’ Build and push `latest` tag
- Pull requests â†’ Build for testing (no push)
- Manual trigger â†’ Available in GitHub Actions tab

### Environment Variables

- `FLASK_ENV`: Set to `production` for production deployment
- `FLASK_HOST`: Host to bind to (default: `0.0.0.0`)
- `FLASK_PORT`: Port to run on (default: `5014`)

## ğŸ› ï¸ API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | Home page with search |
| `/recipe/<id>` | GET | Individual recipe details |
| `/categories` | GET | List all categories |
| `/category/<name>` | GET | Recipes by category |
| `/health` | GET | Health check endpoint |

## ğŸ”§ Troubleshooting

### Common Issues

#### "exec format error" on NAS deployment

**Problem**: Container fails to start with `exec /usr/local/bin/python: exec format error`

**Cause**: Architecture mismatch between your development machine and NAS device

**Solution**:
1. Rebuild the image for the correct architecture:
   ```bash
   ./push-to-dockerhub-amd64.sh
   ```
2. Or use multi-architecture build:
   ```bash
   ./push-to-dockerhub.sh
   ```
3. Pull the updated image on your NAS:
   ```bash
   docker pull docker.io/bbotella/recetas-tia-carmen:latest
   ```

#### Port conflicts

**Problem**: Port 5014 is already in use

**Solution**:
1. Change the external port in docker-compose.yml:
   ```yaml
   ports:
     - "5015:5014"  # Use port 5015 instead
   ```
2. Or stop the conflicting service:
   ```bash
   docker ps  # Find conflicting container
   docker stop <container_id>
   ```

#### Database not found

**Problem**: Application shows "no recipes found"

**Solution**:
1. Check if the database was created:
   ```bash
   docker-compose exec tia-carmen-recipes ls -la /app/
   ```
2. Reimport recipes:
   ```bash
   docker-compose exec tia-carmen-recipes python import_recipes.py
   ```

#### Container health checks failing

**Problem**: Container appears unhealthy in Portainer

**Solution**:
1. Check application logs:
   ```bash
   docker-compose logs tia-carmen-recipes
   ```
2. Test health endpoint manually:
   ```bash
   curl http://localhost:5014/health
   ```

### Architecture Detection

To check your NAS architecture:
```bash
# On your NAS, run:
docker info | grep Architecture
# or
uname -m
```

Common architectures:
- `x86_64` or `amd64` â†’ Use AMD64 image
- `aarch64` or `arm64` â†’ Use ARM64 image

## ğŸ§ª Testing

```bash
# Run basic health check
curl http://localhost:5014/health

# Test search functionality
curl "http://localhost:5014/?q=pollo"

# Test category filtering
curl "http://localhost:5014/?category=Postres"
```

## ğŸ“ Contributing

We welcome contributions! Please follow these steps:

1. **Fork the repository**
2. **Create a feature branch**
   ```bash
   git checkout -b feature/amazing-feature
   ```
3. **Commit your changes**
   ```bash
   git commit -m 'Add amazing feature'
   ```
4. **Push to the branch**
   ```bash
   git push origin feature/amazing-feature
   ```
5. **Open a Pull Request**

### Development Guidelines

- Follow PEP 8 for Python code style
- Add comments for complex logic
- Update documentation for new features
- Test your changes thoroughly

## ğŸ¯ Future Enhancements

- [ ] User authentication and favorites
- [ ] Recipe rating and reviews
- [ ] Social sharing functionality
- [ ] Recipe suggestions based on ingredients
- [ ] Mobile app version
- [ ] Recipe import from external sources
- [ ] Advanced search filters
- [ ] Recipe scaling calculator
- [ ] Print-friendly recipe format
- [x] Multi-language support (Spanish and English)
- [ ] Recipe content translation (ingredients, instructions)
- [ ] Additional languages (French, Portuguese, etc.)

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ™ Acknowledgments

- **TÃ­a Carmen** - For preserving these wonderful family recipes
- **Bootstrap** - For the beautiful UI components
- **Flask** - For the excellent web framework
- **Font Awesome** - For the icons
- **Docker** - For making deployment simple

## ğŸ“¬ Contact

- **Author**: Bernardo Botella
- **Email**: bernardobotellacorbi@gmail.com
- **GitHub**: [@bbotella](https://github.com/bbotella)

---

<div align="center">
  <p><strong>Made with â¤ï¸ to preserve family culinary traditions</strong></p>
  <p><em>Preserving the past, one recipe at a time</em></p>
</div>
